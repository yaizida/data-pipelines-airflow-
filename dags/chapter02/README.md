Отличия от книги:

Здесь я добавил логирование вместо print, так как функция print илзлише нагружает систему
Так же добавил кастомную ошибку, бросаться обычными Ексептами - не очень хорошая практика